{% extends "academy/layout.html" %}

{% block content %}

    <h2>Login</h2>

    {% if message %}
        <div>{{ message }}</div>
    {% endif %}

    <form action="{% url 'login' %}" method="post">
        {% csrf_token %}
        <div class="form-group">
            <input autofocus class="form-control" type="text" name="username" placeholder="Username">
        </div>
        <div class="form-group">
            <input class="form-control" type="password" name="password" placeholder="Password">
        </div>
        {% comment %} including this hidden field to pass the next parameter in the POST request, so the view can retrieve the next valude 
        This way, after successful login, the view can read the next parameter from the POST data, and then use redirect(next_url) to redirect 
        the user back to the original page they were trying to access before being prompted to log in. {% endcomment %}
        <input type="hidden" name="next" value="{{ request.GET.next }}" />
        <input class="btn btn-primary" type="submit" value="Login">
    </form>

    Don't have an account? <a href="{% url 'register' %}">Register here.</a>

{% endblock %}
